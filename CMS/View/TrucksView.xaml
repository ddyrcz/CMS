<Window x:Class="CMS.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:CMS.Common.Converters"
        xmlns:viemodel="clr-namespace:CMS.ViewModel"
        Title="MainWindow"
        Width="525"
        Height="350">

    <Window.DataContext>
        <viemodel:TrucksViewModel />
    </Window.DataContext>
    <Window.Resources>

        <converters:ModeToBooleanConverter x:Key="ModeToBooleanConverter" />

        <Style x:Key="ControlBaseStyle" TargetType="{x:Type FrameworkElement}">
            <Setter Property="Margin" Value="10,10,10,10" />
        </Style>
        <DataTemplate x:Key="TruckItemTemplate">
            <StackPanel>
                <TextBlock FontSize="32"
                           FontWeight="ExtraBlack"
                           Text="{Binding Path=Brand}" />
                <TextBlock FontSize="16"
                           FontStyle="Italic"
                           Text="{Binding Path=RegistrationNumber}" />
            </StackPanel>
        </DataTemplate>

        <DataTemplate x:Key="ModeItemTemplate">
            <TextBlock HorizontalAlignment="Stretch"
                       FontSize="28"
                       FontWeight="Bold"
                       Foreground="#374BFF"
                       Style="{StaticResource ControlBaseStyle}"
                       Text="{Binding}" />
        </DataTemplate>

        <Style x:Key="_ListBoxItemStyle" TargetType="ListBoxItem">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border Name="_Border"
                                CornerRadius="4"
                                Opacity=".5"
                                Padding="2"
                                SnapsToDevicePixels="true">
                            <ContentPresenter />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="true">
                                <Setter TargetName="_Border" Property="Background" Value="#A96FC8" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>



    </Window.Resources>

    <Grid Background="#FF54C8E9">
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
            <ColumnDefinition Width=".8*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height=".5*" />
            <RowDefinition Height=".5*" />
            <RowDefinition />
        </Grid.RowDefinitions>

        <!--  LOGO  -->
        <Image Style="{StaticResource ControlBaseStyle}" />

        <!--  MODE SELECTOR  -->
        <ListBox Grid.RowSpan="2"
                 Grid.Column="1"
                 HorizontalContentAlignment="Stretch"
                 ItemContainerStyle="{StaticResource _ListBoxItemStyle}"
                 ItemTemplate="{StaticResource ModeItemTemplate}"
                 ItemsSource="{Binding Modes}"
                 SelectedItem="{Binding SelectedMode,
                                        Mode=TwoWay}"
                 Style="{StaticResource ControlBaseStyle}" />

        <!--  CARS  -->
        <ListBox Grid.RowSpan="3"
                 Grid.Column="2"
                 ItemTemplate="{StaticResource TruckItemTemplate}"
                 ItemsSource="{Binding Trucks}"
                 SelectedItem="{Binding SelectedTruck}"
                 Style="{StaticResource ControlBaseStyle}" />

        <StackPanel Grid.Row="1" Style="{StaticResource ControlBaseStyle}">
            <TextBlock Text="Mode" />
            <Border Background="White"
                    BorderBrush="#A96FC8"
                    BorderThickness="3"
                    CornerRadius="5">
                <TextBlock HorizontalAlignment="Center"
                           FontSize="24"
                           FontStyle="Italic"
                           FontWeight="Bold"
                           Text="{Binding SelectedMode}" />
            </Border>
        </StackPanel>

        <!--  MODE  -->
        <!--  DETAIL VIEW  -->
        <Grid Grid.Row="2"
              Grid.ColumnSpan="2"
              Background="White"
              Style="{StaticResource ControlBaseStyle}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
                <ColumnDefinition Width="1.5*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="1.8*" />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>


            <TextBlock Margin="10,3"
                       HorizontalAlignment="Right"
                       VerticalAlignment="Center"
                       FontSize="32"
                       FontWeight="Bold"
                       Text="Brand" />
            <TextBox Grid.Column="1"
                     HorizontalAlignment="Stretch"
                     VerticalAlignment="Center"
                     IsEnabled="{Binding SelectedMode,
                                         Converter={StaticResource ModeToBooleanConverter}}"
                     Text="{Binding SelectedTruck.Brand}" />


            <TextBlock Grid.Row="1"
                       Margin="10,3"
                       HorizontalAlignment="Right"
                       VerticalAlignment="Center"
                       FontSize="18"
                       Text="Registration number" />

            <TextBox Grid.Row="1"
                     Grid.Column="1"
                     HorizontalAlignment="Stretch"
                     VerticalAlignment="Center"
                     IsEnabled="{Binding SelectedMode,
                                         Converter={StaticResource ModeToBooleanConverter}}"
                     Text="{Binding SelectedTruck.RegistrationNumber}" />


            <Image Grid.Row="1"
                   Grid.RowSpan="7"
                   Grid.Column="2" />


            <TextBlock Grid.Row="2"
                       Margin="10,3"
                       HorizontalAlignment="Right"
                       VerticalAlignment="Center"
                       FontSize="18"
                       Text="VIN number" />
            <TextBox Grid.Row="2"
                     Grid.Column="1"
                     HorizontalAlignment="Stretch"
                     VerticalAlignment="Center"
                     IsEnabled="{Binding SelectedMode,
                                         Converter={StaticResource ModeToBooleanConverter}}"
                     Text="{Binding SelectedTruck.VIN_Number}" />



            <TextBlock Grid.Row="3"
                       Margin="10,3"
                       HorizontalAlignment="Right"
                       VerticalAlignment="Center"
                       FontSize="18"
                       Text="Term technical research" />
            <DatePicker Grid.Row="3"
                        Grid.Column="1"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Center"
                        IsEnabled="{Binding SelectedMode,
                                            Converter={StaticResource ModeToBooleanConverter}}"
                        Text="{Binding SelectedTruck.TermTechnicalResearch}" />



            <TextBlock Grid.Row="4"
                       Margin="10,3"
                       HorizontalAlignment="Right"
                       VerticalAlignment="Center"
                       FontSize="18"
                       Text="Tacho legalization" />
            <DatePicker Grid.Row="4"
                        Grid.Column="1"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Center"
                        IsEnabled="{Binding SelectedMode,
                                            Converter={StaticResource ModeToBooleanConverter}}"
                        Text="{Binding SelectedTruck.TechLegalization}" />



            <TextBlock Grid.Row="5"
                       Margin="10,3"
                       HorizontalAlignment="Right"
                       VerticalAlignment="Center"
                       FontSize="18"
                       Text="Lift UDT" />
            <DatePicker Grid.Row="5"
                        Grid.Column="1"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Center"
                        IsEnabled="{Binding SelectedMode,
                                            Converter={StaticResource ModeToBooleanConverter}}"
                        Text="{Binding SelectedTruck.LiftUDT}" />



            <TextBlock Grid.Row="6"
                       Margin="10,3"
                       HorizontalAlignment="Right"
                       VerticalAlignment="Center"
                       FontSize="18"
                       Text="OC policy" />
            <DatePicker Grid.Row="6"
                        Grid.Column="1"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Center"
                        IsEnabled="{Binding SelectedMode,
                                            Converter={StaticResource ModeToBooleanConverter}}"
                        Text="{Binding SelectedTruck.OCPolicy}" />


            <TextBlock Grid.Row="7"
                       Margin="10,3"
                       HorizontalAlignment="Right"
                       VerticalAlignment="Center"
                       FontSize="18"
                       Text="AC policy" />
            <DatePicker Grid.Row="7"
                        Grid.Column="1"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Center"
                        IsEnabled="{Binding SelectedMode,
                                            Converter={StaticResource ModeToBooleanConverter}}"
                        Text="{Binding SelectedTruck.ACPolicy}" />


        </Grid>

    </Grid>
</Window>
